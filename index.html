<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Coach</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{background:#0a0a0c;color:#f0f0f2}
    body{font-family:'Inter',sans-serif;opacity:0;transition:opacity .3s}
    body.loaded{opacity:1}
  </style>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-layout">
    <!-- ═══ HEADER ═══ -->
    <header class="header" role="banner">
      <div class="header__left">
        <div class="header__logo" aria-hidden="true">
          <svg width="24" height="24" viewBox="0 0 32 32" fill="none">
            <rect x="4" y="10" width="4" height="12" rx="1.5" fill="#00e676"/>
            <rect x="24" y="10" width="4" height="12" rx="1.5" fill="#00e676"/>
            <rect x="8" y="13" width="16" height="6" rx="1" fill="#00e676"/>
            <rect x="1" y="12" width="3" height="8" rx="1" fill="#00e676" opacity="0.6"/>
            <rect x="28" y="12" width="3" height="8" rx="1" fill="#00e676" opacity="0.6"/>
          </svg>
        </div>
        <h1 class="header__title">Fitness Coach</h1>
      </div>
      <div class="header__right">
        <div class="header__indicator header__streak-mini" id="header-streak" title="Current streak">
          <svg class="header__streak-flame" width="14" height="14" viewBox="0 0 24 24" fill="none">
            <path d="M12 2C10 6 6 8 6 13a6 6 0 0 0 12 0c0-3-1.5-5-3-7-1 2-2 3-3 3s-1.5-2 0-7z" fill="#ffab00"/>
          </svg>
          <span id="header-streak-num">0</span>
        </div>
        <div class="header__indicator header__level-mini" id="header-level" title="Current level">
          <span class="header__level-badge" id="header-level-num">1</span>
        </div>
        <button class="header__sidebar-toggle" id="sidebar-toggle" aria-label="Toggle progress sidebar" aria-expanded="false">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- ═══ CHAT PANEL ═══ -->
    <main class="chat-panel">
      <div class="chat-messages" id="chat-messages" role="log" aria-label="Chat messages" aria-live="polite">
        <!-- Starter prompts shown when empty -->
        <div class="starter" id="starter-area">
          <div class="starter__hero">
            <div class="starter__icon" aria-hidden="true">
              <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                <circle cx="24" cy="24" r="23" stroke="#00e676" stroke-width="1" opacity="0.3"/>
                <circle cx="24" cy="24" r="16" stroke="#00e676" stroke-width="1" opacity="0.15"/>
                <rect x="14" y="19" width="4" height="10" rx="1.5" fill="#00e676" opacity="0.8"/>
                <rect x="30" y="19" width="4" height="10" rx="1.5" fill="#00e676" opacity="0.8"/>
                <rect x="18" y="21.5" width="12" height="5" rx="1" fill="#00e676"/>
              </svg>
            </div>
            <h2 class="starter__title">What are we training today?</h2>
            <p class="starter__subtitle">Evidence-based coaching for lifting, yoga, mobility &amp; nutrition</p>
          </div>
          <div class="starter__grid">
            <button class="starter__card" data-prompt="Build a push/pull/legs program for hypertrophy">
              <span class="starter__card-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00e676" stroke-width="1.5"><rect x="3" y="8" width="3" height="8" rx="1"/><rect x="18" y="8" width="3" height="8" rx="1"/><rect x="6" y="10" width="12" height="4" rx="0.5"/></svg>
              </span>
              <span class="starter__card-text">Build a push/pull/legs program for hypertrophy</span>
            </button>
            <button class="starter__card" data-prompt="Create a high-protein meal plan for muscle gain">
              <span class="starter__card-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00e676" stroke-width="1.5"><path d="M12 2v6M4.93 10.93l1.41 1.41M2 18h2M20 18h2M17.66 12.34l1.41-1.41"/><path d="M6 18a6 6 0 0 1 12 0H6z"/></svg>
              </span>
              <span class="starter__card-text">Create a high-protein meal plan for muscle gain</span>
            </button>
            <button class="starter__card" data-prompt="Design a daily mobility routine for desk workers">
              <span class="starter__card-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00e676" stroke-width="1.5"><circle cx="12" cy="5" r="2"/><path d="M12 7v5l-3 5M12 12l3 5M9 12h6"/></svg>
              </span>
              <span class="starter__card-text">Design a daily mobility routine for desk workers</span>
            </button>
            <button class="starter__card" data-prompt="How should I structure my deload week?">
              <span class="starter__card-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00e676" stroke-width="1.5"><rect x="3" y="4" width="18" height="16" rx="2"/><path d="M3 10h18M8 2v4M16 2v4"/></svg>
              </span>
              <span class="starter__card-text">How should I structure my deload week?</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Scroll-to-bottom button -->
      <button class="scroll-bottom" id="scroll-bottom" aria-label="Scroll to latest message" hidden>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M7 13l5 5 5-5M12 18V6"/></svg>
      </button>

      <!-- Input area -->
      <div class="chat-input-area">
        <div class="chat-input-wrap">
          <textarea
            class="chat-input"
            id="chat-input"
            placeholder="Ask about workouts, nutrition, mobility..."
            rows="1"
            aria-label="Message to fitness coach"
          ></textarea>
          <button class="chat-send" id="chat-send" aria-label="Send message" disabled>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </button>
        </div>
      </div>
    </main>

    <!-- ═══ SIDEBAR ═══ -->
    <aside class="sidebar" id="sidebar" role="complementary" aria-label="Your progress and achievements">
      <div class="sidebar__inner">
        <div class="sidebar__section-label">Your Progress</div>

        <!-- Level Card -->
        <div class="card card--level" id="level-card">
          <div class="card__header">
            <span class="card__label">LEVEL</span>
            <span class="card__level-num" id="sidebar-level-num">1</span>
          </div>
          <div class="card__rank" id="sidebar-rank-name">Newcomer</div>
          <div class="xp-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="xp-bar">
            <div class="xp-bar__fill" id="xp-bar-fill"></div>
          </div>
          <div class="xp-bar__text">
            <span id="xp-current">0</span> / <span id="xp-target">100</span> XP
          </div>
        </div>

        <!-- Streak Card -->
        <div class="card card--streak" id="streak-card">
          <div class="streak-top">
            <div class="streak-flame" id="streak-flame" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
                <path d="M12 2C10 6 6 8 6 13a6 6 0 0 0 12 0c0-3-1.5-5-3-7-1 2-2 3-3 3s-1.5-2 0-7z" fill="currentColor"/>
              </svg>
            </div>
            <div class="streak-number" id="streak-number">0</div>
            <div class="streak-meta">
              <span class="streak-label">Day Streak</span>
              <span class="streak-best" id="streak-best">Best: 0</span>
            </div>
          </div>
          <div class="streak-week" id="streak-week" aria-label="This week's activity">
            <div class="streak-dot" data-day="Mon"><span>M</span></div>
            <div class="streak-dot" data-day="Tue"><span>T</span></div>
            <div class="streak-dot" data-day="Wed"><span>W</span></div>
            <div class="streak-dot" data-day="Thu"><span>T</span></div>
            <div class="streak-dot" data-day="Fri"><span>F</span></div>
            <div class="streak-dot" data-day="Sat"><span>S</span></div>
            <div class="streak-dot" data-day="Sun"><span>S</span></div>
          </div>
        </div>

        <!-- Quick Stats -->
        <div class="card card--stats">
          <div class="stat-row">
            <span class="stat-label">Total Messages</span>
            <span class="stat-value" id="stat-messages">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Topics Explored</span>
            <span class="stat-value" id="stat-topics">0 / 4</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Member Since</span>
            <span class="stat-value" id="stat-since">Today</span>
          </div>
        </div>

        <!-- Achievements -->
        <div class="sidebar__section-label">
          Achievements
          <span class="badge-count" id="badge-count">0 / 12</span>
        </div>
        <div class="badge-grid" id="badge-grid" role="list" aria-label="Achievement badges">
          <!-- Badges rendered by JS -->
        </div>

        <!-- Footer -->
        <div class="sidebar__footer">
          <button class="reset-btn" id="reset-btn">Reset All Data</button>
        </div>
      </div>
    </aside>

    <!-- Mobile sidebar backdrop -->
    <div class="sidebar-backdrop" id="sidebar-backdrop" aria-hidden="true"></div>
  </div>

  <!-- ═══ LEVEL-UP OVERLAY ═══ -->
  <div class="levelup-overlay" id="levelup-overlay" role="alert" aria-live="assertive" hidden>
    <div class="levelup-content">
      <div class="levelup-particles" id="levelup-particles" aria-hidden="true"></div>
      <div class="levelup-text">LEVEL UP</div>
      <div class="levelup-rank" id="levelup-rank"></div>
      <div class="levelup-level" id="levelup-level"></div>
    </div>
  </div>

  <!-- ═══ TOAST CONTAINER ═══ -->
  <div class="toast-container" id="toast-container" aria-live="assertive"></div>

  <!-- ═══ RESET CONFIRM MODAL ═══ -->
  <div class="modal-overlay" id="reset-modal" hidden>
    <div class="modal" role="dialog" aria-labelledby="reset-modal-title" aria-modal="true">
      <h3 id="reset-modal-title">Reset All Data?</h3>
      <p>This will clear your chat history, XP, streak, and all achievements. This cannot be undone.</p>
      <div class="modal__actions">
        <button class="modal__btn modal__btn--cancel" id="reset-cancel">Cancel</button>
        <button class="modal__btn modal__btn--danger" id="reset-confirm">Reset Everything</button>
      </div>
    </div>
  </div>

  <!-- ═══ BADGE TOOLTIP ═══ -->
  <div class="badge-tooltip" id="badge-tooltip" role="tooltip" hidden>
    <div class="badge-tooltip__name" id="tooltip-name"></div>
    <div class="badge-tooltip__desc" id="tooltip-desc"></div>
    <div class="badge-tooltip__date" id="tooltip-date"></div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
